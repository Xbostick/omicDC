Инструкция по установке и работе с модулем omicDC

**1. Подготовка**

*Паша все переделал. Паша теперь напишет правильно.*

Чтобы пользоваться данным скриптом нужно получить доступ к серверу лаборатории, запросив доступ у Коновалова Д.Л. 

Ссыль: [https://t.me/dlkonovalov]()

Далее будучи на сервере 89.175.46.92:32222 выполните команды в терминале 

*cd /home/avoitetskii/omicDC*

*pip install -r requirements.txt*

Все готово к запуску. Вы восхитительны!

**2. Запуск**

Для запуска программы используется команда:

*python3 omicDC.py*

Далее надо указать все необходимые дополнительны ключи. Ключи, помеченные “\*” являются обязательными и выставлены по умолчанию. Если ключ не указан, то поиск не будет ограничен этим параметром. Можно одновременно указывать несколько ключей, а также несколько значений для одного ключа, но об этом ниже.

Дополнительные ключи:

'--assembly' или '-g'

\* Сборка генома. Эта команда также указывает, какой файл chip-atlas будет использован.

default: hg38

Пример: hg19

'--path' или '-p'

\* Путь к папке, куда нужно положить результат.

default: ~ (Это ваша домашняя директория)

Пример: */home/avoitetskii/*

'--id' или '-i'

Необходимые эксперименты.

Пример: SRX344646

'--antigen\_class' или '-b'

Класс антигена. *Важное: если класс антигена содержит пробелы, то их надо заменить на “\_”*

Пример 1: Histone

Пример 2: TFs\_and\_others

'--antigen' или '-a'

Атиген.

Пример: GATA2

'--cell\_type' или '-t'

Класс клеток.

Пример: Blood

'--cell' или '-c'

Тип клеток.

Пример: K-562

'--verbose' или '-v'

Подробный отчет во время работы.

default: 1

Пример: 0 или 1

Значения необязательных ключей нужно брать из таблицы экспериментов chip-atlas experimentList.tab:

` `[https://github.com/inutano/chip-atlas/wiki#experimentList_schema]() 

Пример, если необходимо указать несколько дополнительных ключей. Эти записи вернут одинаковый результат:

*python script.py* --assembly *hg19 --file /home/avoitetskii/* --antigen\_class *Histone* --cell\_type *Blood*

или

*python script.py -g hg19 -f /home/avoitetskii/ -b Histone -t Blood*


Если необходимо указать несколько значений для одного ключа, то их необходимо указать *через запятую и без пробелов:*

*python script.py* --assembly *hg19 --file /home/avoitetskii/ --*id SRX097088,DRX184552,ERX1999197

или

*python script.py -g hg19 -f /home/avoitetskii/ -i SRX097088,DRX184552,ERX1999197*


**3. Полученные данные**

После окончания работы программы выполните 

cd ~

Чтобы оказаться в совей домашней директории. В результате работы программы при выборе пути по умолчанию в домашней папке будет создана папка omicDC\_results.

В папке с результатами появляются .pkl файлы, которые будут разбиты по антигенам с указанием, к какому классу они относятся. Они преобразованы с помощью библиотеки sparse vector([https://github.com/Nazar1997/Sparse_vector/]()). Разберем на примере.

Пример: Histone\_H1.pkl

В этом файле содержатся результаты для класса антигенов Histone и антигена H1. В нем для каждой хромосомы для каждого нуклеотида будет указано значение. 0, если ни один из выбранных экспериментов не затрагивал этот нуклеотид, или значение подходящего эксперимента.

Сам файл представляет из себя python словарь: {хромосома: sparse\_vector}

sparse\_vector имеет такую же длину, как длина хромосомы. Можно либо получить весь массив, либо какой-то его отрезок:



Получить все результаты из файла *Histone\_H1.pkl* для chr8:

*h1 = load('Histone\_H1.pkl')*

*h1['chr8'][:]*

Получить результаты с 100 по 200 нуклеотид из файла *Histone\_H1.pkl* для chr8:

*h1 = load('Histone\_H1.pkl')*

*h1['chr8'][100:200]*


